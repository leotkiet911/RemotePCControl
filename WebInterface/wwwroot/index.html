<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Remote PC Control - HCMUS</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/microsoft-signalr/6.0.1/signalr.min.js"></script>
    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Particle Background -->
    <div id="particle-background"></div>
    <!-- Header -->
    <header class="main-header">
        <div class="header-content">
            <div class="logo">
                <span class="logo-text">3AESieuNhan<span class="logo-dot">.</span></span>
            </div>
            <div class="menu-toggle" onclick="toggleMenu()">
                <span class="menu-text">MENU</span>
                <div class="hamburger">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>
            <!-- Menu Dropdown -->
            <div class="menu-dropdown" id="menuDropdown">
                <div class="menu-header">
                    <span>📋 Các tính năng điều khiển</span>
                </div>
                <div class="menu-item" onclick="navigateToTask('apps')">
                    <i class="fas fa-mobile-alt"></i>
                    <span>📱 Quản lý Apps</span>
                </div>
                <div class="menu-item" onclick="navigateToTask('processes')">
                    <i class="fas fa-cog"></i>
                    <span>⚙️ Quản lý Processes</span>
                </div>
                <div class="menu-item" onclick="navigateToTask('screen')">
                    <i class="fas fa-camera"></i>
                    <span>📸 Chụp màn hình</span>
                </div>
                <div class="menu-item" onclick="navigateToTask('keylog')">
                    <i class="fas fa-keyboard"></i>
                    <span>⌨️ Keylogger</span>
                </div>
                <div class="menu-item" onclick="navigateToTask('webcam')">
                    <i class="fas fa-video"></i>
                    <span>📹 Webcam</span>
                </div>
                <div class="menu-item" onclick="navigateToTask('system')">
                    <i class="fas fa-power-off"></i>
                    <span>🔋 Điều khiển hệ thống</span>
                </div>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero-section">
        <div class="hero-content">
            <div class="hero-text">
                <p class="welcome-text">WELCOME TO REMOTE PC CONTROL</p>
                <h1 class="main-headline">3AESieuNhan - Remote PC Control</h1>
                <h3 class="main-headline">Choose your role</h3>
                <div class="hero-buttons">
                    <button class="hero-btn" onclick="selectMode('controlled')">PC Bị điều khiển</button>
                    <button class="hero-btn" onclick="selectMode('controller')">PC điều khiển</button>
                </div>
            </div>
        </div>

        <!-- Vines decoration -->
        <div class="vines-decoration"></div>

        <!-- Social Media Icons -->
        <div class="social-icons">
            <a href="https://github.com/leotkiet911/RemotePCControl" class="social-icon"><i class="fab fa-github"></i></a>
            <a href="https://leotkiet911.github.io/Webgioithieu/" class="social-icon"><i class="fab fa-google"></i></a>
        </div>
    </section>

    <!-- Content Sections (Hidden by default) -->
    <div class="content-overlay" id="contentOverlay">
        <div class="content-container">
            <!-- Controlled Section -->
            <div id="controlledSection" class="form-section">
                <button class="close-btn" onclick="selectMode(null)">×</button>
                <h3 style="margin-bottom: 16px; color: white;">💻 Cài đặt máy bị điều khiển</h3>
                <div id="serverInfoCard" class="info-card">
                    <div>
                        <p class="muted">Server</p>
                        <h4 id="serverEndpoint" style="color: white;">Đang tải thông tin server...</h4>
                    </div>
                    <button class="btn-download" onclick="downloadClientPackage()">⬇️ Tải gói ClientControlled</button>
                </div>
                <div class="info-card">
                    <ol class="steps">
                        <li>Tải file <b>client-controlled.zip</b> và giải nén.</li>
                        <li>Chạy <code>ClientControlled.exe</code> trong thư mục giải nén.</li>
                        <li>Sau khi chạy, IP &amp; Password sẽ hiển thị tại đây và trên cửa sổ app.</li>
                    </ol>
                </div>
                <div class="info-card">
                    <div class="card-header">
                        <div>
                            <p class="muted">Trạng thái</p>
                            <h4 style="color: white;">Danh sách máy đã đăng ký</h4>
                        </div>
                        <button class="btn-primary small" onclick="refreshSessions()">🔄 Làm mới</button>
                    </div>
                    <div id="sessionList" class="session-list">Chưa có máy kết nối.</div>
                </div>
            </div>

            <!-- Login Section -->
            <div id="loginSection" class="form-section">
                <h3 style="margin-bottom: 20px;">🔐 Đăng nhập để điều khiển</h3>
                <div id="loginError" class="error-message"></div>
                <div class="input-group">
                    <label style="color: white;">Tài khoản (IP Address)</label>
                    <input type="text" id="loginIp" placeholder="192.168.1.100" value="127.0.0.1">
                </div>
                <div class="input-group">
                    <label style="color: white;">Mật khẩu</label>
                    <input type="password" id="loginPassword" placeholder="Nhập mật khẩu 6 số">
                </div>
                <button class="btn btn-primary" onclick="login()">Kết nối</button>
            </div>
           

            <!-- Control Panel -->
            <div id="controlPanel" class="control-panel">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; flex-wrap: wrap; gap: 10px;">
                    <h3 style="display: flex; align-items: center; color: white;">
                        <span class="status-indicator status-connected"></span>
                        <span id="connectedIp"></span>
                    </h3>
                    <button class="btn-secondary" style="padding: 8px 16px; border-radius: 6px; border: none; cursor: pointer;" onclick="disconnect()">Ngắt kết nối</button>
                </div>

                <div class="tabs">
                    <button class="tab active" onclick="switchTab('apps')">📱 Apps</button>
                    <button class="tab" onclick="switchTab('processes')">⚙️ Processes</button>
                    <button class="tab" onclick="switchTab('screen')">📸 Screenshot</button>
                    <button class="tab" onclick="switchTab('keylog')">⌨️ Keylogger</button>
                    <button class="tab" onclick="switchTab('webcam')">📹 Webcam</button>
                    <button class="tab" onclick="switchTab('system')">🔋 System</button>
                </div>

                <div id="appsTab" class="tab-content active">
                    <div class="action-buttons">
                        <div class="action-btn" onclick="listApplications()">
                            <div class="icon">📋</div>
                            <h4>Danh sách Apps</h4>
                            <p>Xem ứng dụng đang chạy</p>
                        </div>
                        <div class="action-btn" onclick="openAppSearchModal()">
                            <div class="icon">▶️</div>
                            <h4>Mở ứng dụng</h4>
                            <p>Tìm kiếm và mở app</p>
                        </div>
                    </div>
                    <div id="appsList" class="list-container"></div>
                </div>

                <!-- App Search Modal -->
                <div id="appSearchModal" class="modal-overlay">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h3>🔍 Tìm kiếm ứng dụng</h3>
                            <button class="modal-close" onclick="closeAppSearchModal()">×</button>
                        </div>
                        <div class="modal-body">
                            <div class="search-input-group">
                                <input type="text" id="appSearchInput" class="search-input" 
                                       placeholder="Nhập tên ứng dụng (VD: notepad, chrome, word)..." 
                                       onkeyup="handleAppSearch(event)">
                                <button class="btn-search" onclick="performAppSearch()">
                                    <i class="fas fa-search"></i> Tìm kiếm
                                </button>
                            </div>
                            <div id="appSearchResults" class="app-search-results">
                                <div class="search-placeholder">
                                    <div class="icon">🔍</div>
                                    <p>Nhập tên ứng dụng và nhấn Enter hoặc nút "Tìm kiếm"</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="processesTab" class="tab-content">
                    <div class="action-buttons">
                        <div class="action-btn" onclick="listProcesses()">
                            <div class="icon">📋</div>
                            <h4>Danh sách Processes</h4>
                            <p>Xem tiến trình đang chạy</p>
                        </div>
                        <div class="action-btn" onclick="startProcess()">
                            <div class="icon">▶️</div>
                            <h4>Chạy Process</h4>
                            <p>Khởi động tiến trình</p>
                        </div>
                    </div>
                    <div id="processesList" class="list-container"></div>
                </div>

                <div id="screenTab" class="tab-content">
                    <div class="action-buttons">
                        <div class="action-btn" onclick="takeScreenshot()">
                            <div class="icon">📸</div>
                            <h4>Chụp màn hình</h4>
                            <p>Lấy ảnh màn hình</p>
                        </div>
                    </div>
                    <div id="screenshotContainer"></div>
                </div>

                <div id="keylogTab" class="tab-content">
                    <div class="action-buttons">
                        <div class="action-btn" onclick="getKeylogs()">
                            <div class="icon">📥</div>
                            <h4>Lấy Keylogs</h4>
                            <p>Xem phím đã bấm</p>
                        </div>
                        <div class="action-btn" onclick="clearKeylogs()">
                            <div class="icon">🗑️</div>
                            <h4>Xóa Keylogs</h4>
                            <p>Xóa lịch sử</p>
                        </div>
                    </div>
                    <div class="keylog-display" id="keylogDisplay">Nhấn "Lấy Keylogs" để xem...</div>
                </div>

                <div id="webcamTab" class="tab-content">
                    <div class="action-buttons">
                        <div class="action-btn" onclick="startWebcam()">
                            <div class="icon">📹</div>
                            <h4>Bật Webcam</h4>
                            <p>Khởi động camera</p>
                        </div>
                        <div class="action-btn" onclick="captureWebcam()">
                            <div class="icon">📸</div>
                            <h4>Chụp ảnh</h4>
                            <p>Snapshot từ webcam</p>
                        </div>
                        <div class="action-btn" onclick="stopWebcam()">
                            <div class="icon">⏹️</div>
                            <h4>Tắt Webcam</h4>
                            <p>Đóng camera</p>
                        </div>
                    </div>

                    <div class="webcam-container" id="webcamContainer">
                        <div class="webcam-placeholder">
                            <div class="icon">📹</div>
                            <h3>Webcam chưa khởi động</h3>
                            <p>Nhấn "Bật Webcam" và "Live Stream" để bắt đầu</p>
                        </div>
                    </div>

                    <div id="webcamSnapshots" class="webcam-snapshots"></div>
                </div>

                <div id="systemTab" class="tab-content">
                    <div class="action-buttons">
                        <div class="action-btn" onclick="shutdownPC()">
                            <div class="icon">🔴</div>
                            <h4>Shutdown</h4>
                            <p>Tắt máy tính</p>
                        </div>
                        <div class="action-btn" onclick="restartPC()">
                            <div class="icon">🔄</div>
                            <h4>Restart</h4>
                            <p>Khởi động lại</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script src="particle.js"></script>
</body>
</html>
